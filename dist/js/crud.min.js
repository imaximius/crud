function datatableService(e){function t(t,r,o){var n=a(r);return e({method:"POST",url:t+(o?"?"+$.param(o):""),data:n})}function a(e){for(var t={sEcho:e.echo,iColumns:e.columns.length,sColumns:new Array(e.columns.length),iDisplayStart:(e.page-1)*e.pagination,iDisplayLength:e.pagination,sSearch:e.search,bRegex:!1,iSortCol_0:e.sortColumn,sSortDir_0:e.sortColumnAsc?"asc":"desc",iSortingCols:1},a=0;a<e.columns.length;a++)t["sSearch_"+a]=void 0,t["mDataProp_"+a]=a,t["bRegex_"+a]=!1,t["bSearchable_"+a]=e.columns[a].searchable,t["bSortable_"+a]=e.columns[a].sortable;return t}var r={get:t};return r}!function(){"use strict";angular.module("crud",["ngDialog","crud.form","crud.toolbar","crud.datatable","ui.bootstrap","crud.filter","crud.dialog"])}(),function(){"use strict";angular.module("crud.datatable",["crud.datatable.core","crud.datatable.widgets"])}(),function(){"use strict";angular.module("crud.dialog",[])}(),function(){"use strict";angular.module("crud.filter",[])}(),function(){"use strict";angular.module("crud.form",["crud.widgets"])}(),function(){"use strict";angular.module("crud.toolbar",[])}(),function(){"use strict";angular.module("crud.widgets",["crud.widgets.dynamic","crud.widgets.text","crud.widgets.choice","crud.widgets.multichoice","crud.widgets.checkbox","crud.widgets.hidden","crud.widgets.subform","crud.widgets.ajaxdata","crud.widgets.range","crud.widgets.jsonview"])}(),function(){"use strict";angular.module("crud.datatable.core",["crud.datatable.header","crud.datatable.row","crud.datatable.search","crud.datatable.pages","crud.datatable.info","crud.datatable.pagination","crud.widgets.compileit"])}(),function(){"use strict";angular.module("crud.datatable.widgets",["crud.datatable.widgets.checkbox","crud.datatable.widgets.dropdown"])}(),function(){"use strict";angular.module("crud.widgets.ajaxdata",["crud.widgets"])}(),function(){"use strict";angular.module("crud.widgets.checkbox",[])}(),function(){"use strict";angular.module("crud.widgets.choice",[])}(),function(){"use strict";angular.module("crud.widgets.compileit",[])}(),function(){"use strict";angular.module("crud.widgets.datetimerangepicker",[])}(),function(){"use strict";angular.module("crud.widgets.dynamic",[])}(),function(){"use strict";angular.module("crud.widgets.hidden",[])}(),function(){"use strict";angular.module("crud.widgets.jsonview",[])}(),function(){"use strict";angular.module("crud.widgets.multichoice",[])}(),function(){"use strict";angular.module("crud.widgets.range",["ui-rangeSlider"])}(),function(){"use strict";angular.module("crud.widgets.subform",["crud.widgets"])}(),function(){"use strict";angular.module("crud.widgets.text",[])}(),function(){"use strict";angular.module("crud.datatable.header",[])}(),function(){"use strict";angular.module("crud.datatable.info",[])}(),function(){"use strict";angular.module("crud.datatable.pages",[])}(),function(){"use strict";angular.module("crud.datatable.pagination",[])}(),function(){"use strict";angular.module("crud.datatable.row",[])}(),function(){"use strict";angular.module("crud.datatable.search",[])}(),function(){"use strict";angular.module("crud.datatable.widgets.checkbox",[])}(),function(){"use strict";angular.module("crud.datatable.widgets.dropdown",["ui.bootstrap"])}(),function(){"use strict";angular.module("crud").config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}])}(),function(){"use strict";function e(){return a.prototype=Object.create(Array.prototype),t}function t(e){function t(){n={},Object.keys(e).forEach(function(t){e[t]instanceof Array||(e[t]=[e[t]]),e[t].forEach(function(e){o(t,e)})})}function r(e){return n.hasOwnProperty(e)||(n[e]=new a),n[e]}function o(e,t){return n.hasOwnProperty(e)||(n[e]=new a),n[e].push(t),i}var n,i=angular.extend(this,{event:r});return t(),i}function a(){function e(e,a){a=arguments,t.forEach(function(t){t.apply(e,this)},Object.keys(a).filter(function(t){return e!==a[t]}).map(function(e){return a[e]}))}var t=angular.extend(this,{invoke:e});return t}angular.module("crud").factory("EventsHandler",e)}(),function(){"use strict";function e(e){return function(){function t(t){return o=e({url:t,method:"GET"}),this}function a(e){return e instanceof Object&&void 0!==o&&o.then.apply(o,["onSuccess","onError"].map(function(t){return e.hasOwnProperty(t)?function(a){e[t](a.data,a.status,a)}:void 0})),this}function r(){o=void 0}var o;return{load:t,onLoaded:a,clearPromise:r}}}angular.module("crud").factory("CRUDLoader",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,a,r,o,n,i,s){function c(){r.loader("config").load(t.$current.initialize).onLoaded({onSuccess:function(t){m.initLoader=!1,m.filter.build(t.filter),m.toolbar.build(t.action&&t.action.top?t.action.top:[]),m.datatable.build(t.grid),e.$$phase||e.$apply()},onError:function(e){m.initLoader=!1,s.pop("error","Error",e.message)}})}function u(){function e(e,t){return v(e.getTime(),t.replace(/Y+/g,"yyyy").replace(/m+/g,"MM").replace(/d+/g,"dd").replace(/H+/g,"HH").replace(/i+/g,"mm").replace(/s+/g,"ss"))}function t(e,t){var a=[];return e.length&&e.forEach(function(e,r){a[r]="undefined"!=typeof e[t]?e[t]:e.id?e.id:e}),a}function a(e,t){var a=void 0;return a="undefined"!=typeof t&&"undefined"!=typeof e[t]?e[t]:"undefined"!=typeof e.id?e.id:void 0}function r(o){for(var n={},i=0;i<o.length;i++)"datetimerangepicker"===o[i].type&&o[i].value.startDate?(n[o[i].options.fullName]={},n[o[i].options.fullName][o[i].options.leftDatetime.name]=e(o[i].value.startDate.toDate(),o[i].options.date_format),n[o[i].options.fullName][o[i].options.rightDatetime.name]=e(o[i].value.endDate.toDate(),o[i].options.date_format)):"range"===o[i].type?(n[o[i].options.fullName]={},n[o[i].options.fullName][o[i].options.range_min.field_name]=o[i].value.min,n[o[i].options.fullName][o[i].options.range_max.field_name]=o[i].value.max):"object"==typeof o[i].value&&"datetimerangepicker"!==o[i].type?o[i].value.widgets?(n[o[i].options.fullName]=o[i].value.value,angular.extend(n,r(o[i].value.widgets))):o[i].value.choices?n[o[i].options.fullName]=t(o[i].value.choices,o[i].options.field_value):n[o[i].options.fullName]=a(o[i].value,o[i].options.field_value):n[o[i].options.fullName]=o[i].value;return n}function o(e){var t=r(e);return m.datatable.filter(t),t}function n(){m.datatable.reset()}return{useFormTransformer:"symfony",layout:"grid",actionBar:[{$$:"search",icon:"fa fa-search",title:"admin.general.SEARCH","class":"primary"},{$$:"reset",icon:"fa fa-refresh",title:"admin.general.RESET"}],actions:{search:o,reset:n}}}function l(){function e(e){o.open({template:"crud/dialog.html",className:"crudDialog ngdialog-theme-default",data:{icon:e.view.dialogIcon||e.view.icon,title:e.view.label,datatable:m.datatable,form:{source:e.source}}})}return{useActionTransformer:"symfony",actions:{create:e,edit:f,remove:p}}}function d(){function e(e){m.toolbar.refreshButtonsAccessibility(e.length>0)}function t(e){o.open({template:"crud/dialog.html",className:"crudDialog ngdialog-theme-default",data:{icon:e.view.icon,title:e.view.label,datatable:m.datatable,form:{source:e.form.source+"/"+e.row.id}}})}function a(e){o.open({template:"crud/show.html",className:"crudDialog ngdialog-theme-default",data:{icon:e.view.icon,title:e.view.label,datatable:m.datatable,form:{source:e.form.source+"/"+e.row.id}}})}return{events:{onRenderRows:e,onSelectRow:e},actions:{update:t,setState:f,remove:p,show:a}}}function f(e){var t=[];e.hasOwnProperty("row")&&t.push(e.row.id),1!==t.length&&(t=m.datatable.getSelectedRows()),a.send({url:e.source,method:"POST",data:{data:t},notify:!0},function(){m.datatable.refresh()})}function p(e){var t=[];e.hasOwnProperty("row")&&t.push(e.row.id),1!==t.length&&(t=m.datatable.getSelectedRows()),n.swal({title:g(e.confirm.title),type:"warning",showCancelButton:!0,cancelButtonText:g(e.confirm.buttons.cancel),confirmButtonText:g(e.confirm.buttons.confirm),confirmButtonColor:"#dd6b55"},function(r){r&&a.send({url:e.source,method:"POST",data:{data:t},notify:!0},function(){m.datatable.refresh()})})}var m=this,g=i("translate"),v=i("date");e.icon=t.$current.crud.icon,e.title=t.$current.crud.title,e.customDatatableView=t.$current.customDatatableView,m.initSrc=t.$current.initialize,m.initLoader=!0,m.filter=u(),m.toolbar=l(),m.datatable=d(),e.$on("panel-refresh",function(t,a){e.$broadcast("removeSpinner",a),"filter"===a&&m.filter.actions.reset.call(m.filter)}),c()}angular.module("crud").controller("CRUDController",e),e.$inject=["$scope","$state","transport","supervisor","ngDialog","SweetAlert","$filter","toaster"]}(),function(){"use strict";function e(e,t,a,r,o){function n(){if(!(e.$parent.hasOwnProperty("ngDialogData")&&e.$parent.ngDialogData instanceof Object))throw console.error("[ERROR]: Controller cannot access required initialisation data.");var t=e.$parent.ngDialogData;["icon","title"].forEach(function(e){t.hasOwnProperty(e)&&(u[e]=t[e])}),t.hasOwnProperty("datatable")&&s(t.datatable),t.hasOwnProperty("form")&&i(t.form)}function i(t){t instanceof Object&&t.hasOwnProperty("source")&&a.loader("form").load(t.source).onLoaded({onSuccess:function(e){u.isLoaded=!0,u.form.build(e)},onError:function(t){u.isLoaded=!0,e.closeThisDialog(),o.pop("error","Error",t.message)}})}function s(e){c=e}var c,u=this;u.isLoaded=!1,u.icon="fa fa-file-o",u.title="Dialog",u.errors=[],u.subforms=[],u.form={useFormTransformer:"symfony",actionBar:[{$$:"save",icon:"fa fa-check",title:"admin.general.SAVE","class":"primary"},{$$:"cancel",icon:"fa fa-minus-circle",title:"admin.general.CANCEL"}],actions:{save:function(a,r,o){var n={};e.actionBlock=!0;for(var i=0;i<a.length;i++)"subform"===a[i].type?(n[a[i].name]=a[i].value.value,a[i].value.widgets&&(n.subforms||(n.subforms={}),n.subforms[a[i].name]=a[i].value.widgets.map(function(e){return{id:e.name,value:e.value}}))):"multichoice"===a[i].type?n[a[i].name]=a[i].value.choices:n[a[i].name]=a[i].value;t.send({url:r,method:o,data:n,notify:{skipIf:"error"}},function(){e.actionBlock=!1,c.refresh(),e.closeThisDialog()},function(t){t.errorFields&&u.form.showErrorFields(t.errorFields),e.actionBlock=!1,u.errors=t.message.split(/\n/)})},cancel:function(){e.closeThisDialog()}}},n()}angular.module("crud").controller("CRUDDialogController",e),e.$inject=["$scope","transport","supervisor","$filter","toaster"]}(),function(){"use strict";function e(e,t,a,r,o){function n(){if(!(e.$parent.hasOwnProperty("ngDialogData")&&e.$parent.ngDialogData instanceof Object))throw console.error("[ERROR]: Controller cannot access required initialisation data.");var t=e.$parent.ngDialogData;["icon","title"].forEach(function(e){t.hasOwnProperty(e)&&(u[e]=t[e])}),t.hasOwnProperty("datatable")&&s(t.datatable),t.hasOwnProperty("form")&&i(t.form)}function i(t){t instanceof Object&&t.hasOwnProperty("source")&&a.loader("form").load(t.source).onLoaded({onSuccess:function(e){u.isLoaded=!0,u.form.build(e)},onError:function(t){u.isLoaded=!0,e.closeThisDialog(),o.pop("error","Error",t.message)}})}function s(e){c=e}var c,u=this;u.isLoaded=!1,u.icon="fa fa-file-o",u.title="Dialog",u.errors=[],u.form={useFormTransformer:"symfony",actionBar:[{$$:"cancel",icon:"fa fa-minus-circle",title:"admin.general.CANCEL"}],actions:{cancel:function(){e.closeThisDialog()}}},n()}angular.module("crud").controller("CRUDShowDialogController",e),e.$inject=["$scope","transport","supervisor","$filter","toaster"]}(),function(){"use strict";function e(){function e(){function e(){return r=t(),o}function t(){function e(e){var t={editRow:"setState",deleteRow:"remove"};return t.hasOwnProperty(e.callback)?t[e.callback]:e.callback}function t(e){return e.hasOwnProperty("confirm")?{title:e.confirm.title,buttons:{confirm:e.confirm.yes.title,cancel:e.confirm.no.title}}:void 0}function a(e){return e.hasOwnProperty("form")?{source:e.form}:void 0}function r(e){return e.hasOwnProperty("resource")?e.resource:void 0}function o(e){return e.hasOwnProperty("display")?e.display:void 0}return{name:e,confirm:t,form:a,view:o,source:r}}function a(e){return function(){var e=this;return Object.keys(arguments).forEach(function(t){void 0!==this[t][Object.keys(this[t])[0]]&&angular.extend(e,this[t])},arguments)||e}.apply({name:r.name(e)},[{confirm:r.confirm(e)},{form:r.form(e)},{source:r.source(e)},{view:r.view(e)}])}var r,o=angular.extend(this,{transform:a});return e()}var t={symfony:new e};return function(e){return t[e]}}angular.module("crud").service("tf.action",e)}(),function(){"use strict";function e(e,t){function a(e,t){var a={};switch(a.callback=e.callback,e.callback){case"update":a.callback="update",a.data={view:e.display,form:{source:e.form},row:{id:t}};break;case"editRow":a.callback="setState",a.data={view:e.display,form:{source:e.form},source:e.resource,row:{id:t}};break;case"deleteRow":a.callback="remove",a.data={view:e.display,confirm:{buttons:{cancel:e.confirm.no.title,confirm:e.confirm.yes.title},title:e.confirm.title},source:e.resource,row:{id:t}};break;case"show":a.callback="show",a.data={view:e.display,form:{source:e.form},row:{id:t}}}return a}function r(e,t){var a={searching:t&&t.hasOwnProperty("searching")?t.searching:!0,paging:t&&t.hasOwnProperty("paging")?t.paging:!0,hasCheckboxes:t&&t.hasOwnProperty("hasCheckboxes")?t.hasCheckboxes:!0,hasDropdowns:t&&t.hasOwnProperty("hasDropdowns")?t.hasDropdowns:!0};return e.hasOwnProperty("searching")&&(a.searching=e.searching),e.hasOwnProperty("paging")&&(a.paging=e.paging),e.hasOwnProperty("hasCheckboxes")&&(a.hasCheckboxes=e.hasCheckboxes),e.hasOwnProperty("hasDropdowns")&&(a.hasDropdowns=e.hasDropdowns),a}var o=this;o.parseAction=a,o.parseServerOptions=r}angular.module("crud.datatable").service("CrudDatatableDataParser",e),e.$inject=[]}(),function(){"use strict";function e(e,t){function a(e,t){var a={type:e.type||"text",name:e.id,options:{translateLabel:e.name||e.label},value:e.value};return a.options=angular.extend(a.options,e.attr),a.options.hasOwnProperty("editable")||(a.options.editable=!0),!a.options.hasOwnProperty("fullName")&&t&&(a.options.fullName=t+"["+a.name+"]"),a}function r(e,t){for(var a=[],r=0;r<e.length;r++)a.push({name:e[r].$$,"class":e[r]["class"],icon:e[r].icon,title:e[r].title,action:t[e[r].$$]});return a}function o(e){return e.name+"_form"}function n(e){return e.attr}function i(e,t){return e&&e.hasOwnProperty(t.replace(/([A-Z])/g,"_$1").toLowerCase())?e[t.replace(/([A-Z])/g,"_$1").toLowerCase()]:void 0}function s(e){return"object"==typeof e}function c(e){if(e.length)for(var t=0;t<e.length;t++)if("entity"==e[t])return!0;return!1}function u(e,t,a){var r=[];for(var o in e){var n={name:e[o].vars.name,type:e[o].vars.block_prefixes[1],entity:c(e[o].vars.block_prefixes),value:i(t,e[o].vars.name)};switch(e[o].vars.block_prefixes[1]){case"text":n.options=e[o].vars.attr,n.options.isJson&&(n.type="jsonview");break;case"choice":if(n.options=e[o].vars.attr,n.type=e[o].vars.multiple?"multichoice":e[o].vars.attr.isSmartSelectedForm?"subform":e[o].vars.attr.isSmartSelectedDymamicLoaderValues?"ajaxdata":"choice","subform"!==n.type&&"ajaxdata"!==n.type||!n.value){if(e[o].vars.multiple&&n.value){var u=[];"undefined"!=typeof n.value&&"object"==typeof n.value&&Object.keys(n.value).forEach(function(e){"undefined"!=typeof n.value[e][n.options.field_value]?u[e]={id:n.value[e].id,label:n.value[e][n.options.field_value]}:u[e]={id:n.value[e].id,label:n.value[e].label}}),n.value={choices:u}}else if("object"==typeof n.value){var l=void 0;"undefined"!=typeof n.value&&n.value.length?Object.keys(n.value).forEach(function(e){"undefined"!=typeof n.value[e]&&"choice"==n.type&&(l="undefined"!=typeof n.value[e][n.options.field_value]?n.value[e][n.options.field_value]:n.value[e].id)}):l="undefined"!=typeof n.value[n.options.field_value]?n.value[n.options.field_value]:n.value.id,n.value=l}}else n.options.formId=n.value.id,n.value={value:n.value.id,widgets:[]};n.options.choices=[],Object.keys(e[o].vars.choices).forEach(function(t){n.options.choices.push({id:s(e[o].vars.choices[t].data)?e[o].vars.choices[t].data.id:e[o].vars.choices[t].data,label:e[o].vars.choices[t].label})});break;case"filter_date_range":case"filter_datetime_range":n.options=e[o].children.left_datetime.vars.attr,n.type="datetimerangepicker",n.options.leftDatetime={name:e[o].children.left_datetime.vars.name},n.options.rightDatetime={name:e[o].children.right_datetime.vars.name};break;default:n.options=e[o].vars.attr}n.options.hasOwnProperty("editable")||(n.options.editable=!0),n.options.fullName=e[o].vars.full_name,a&&(n.options.formName=a),n.options.placeholder||(n.options.placeholder=e[o].vars.placeholder),r.push(n)}return r}var l=this;l.parseActions=r,l.parseName=o,l.parseOptions=n,l.parseWidgets=u,l.parseSubformWidget=a}angular.module("crud.filter").service("CrudFormDataParser",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e){return Object.keys(e).reverse().map(function(a){return{name:a,buttons:t(e[a])}})}function t(e){var t=[];return t=e.map(function(e){var t="";switch(e.callback){case"deleteRow":t="remove";break;case"editRow":t="edit";break;case"create":t="create"}var a={};return e.confirm&&(e.confirm.title&&(a.title=e.confirm.title),a.buttons={},e.confirm.no&&(a.buttons[e.confirm.no["class"]]=e.confirm.no.title),e.confirm.yes&&(a.buttons[e.confirm.yes["class"]]=e.confirm.yes.title)),{callback:t,view:e.display,source:e.form||e.resource,confirm:a}})}var a=this;a.parseGroups=e}angular.module("crud.toolbar").service("CrudToolbarDataParser",e),e.$inject=[]}(),function(){"use strict";function e(e){function a(e){return void 0===o.get(e)&&o.set(e,new t),o.get(e)}function r(t){return void 0===a("loader").get(t)&&a("loader").set(t,new e),a("loader").get(t)}var o=new t;return{loader:r}}function t(){function e(e,t){return a[e]=t,r}function t(e){return a[e]}var a={},r={set:e,get:t};return r}angular.module("crud").service("supervisor",e),e.$inject=["CRUDLoader"]}(),function(){"use strict";function e(e,t){function a(t,a,o){e(angular.extend(t,function(e){return t.hasOwnProperty("data")?$.param(t.data):e}({}),function(e){return t.hasOwnProperty("contentType")&&"form"===t.contentType?{headers:{"Content-Type":"application/x-www-form-urlencoded"}}:e}({}))).then(function(e){var o=e.data;t.hasOwnProperty("notify")&&r(t.notify,"success",o),"function"==typeof a&&a(o)},function(e){var a=e.data;t.hasOwnProperty("notify")&&r(t.notify,"error",a),"function"==typeof o&&o(e.data)})}function r(e,a,r){function o(){e.hasOwnProperty("message")||(e.message="="),e.hasOwnProperty("skipIf")&&e.skipIf.constructor!==Array&&(e.skipIf=[e.skipIf]),n()&&t.pop(a,s[a].title,i(e.message))}function n(){return s.hasOwnProperty(a)&&!(e.hasOwnProperty("skipIf")&&-1!==e.skipIf.indexOf(a))}function i(e){return e instanceof Object&&e.hasOwnProperty(a)?i(e[a]):r[function(e){return e&&void 0!==e[1]?e[1]:"message"}(/=?([A-z0-9-_]+)?/.exec(e))]}if(!(e instanceof Object)){if(-1===["boolean"].indexOf(typeof e))return;"boolean"==typeof e&&(e={})}var s={success:{title:"Success"},error:{title:"Error"}};return o()}return angular.extend(this,{send:a})}angular.module("crud").service("transport",e),e.$inject=["$http","toaster"]}(),function(){function e(e,t,a,r,o,n,i,s){function c(e,c,u){function l(t){t&&(e.serverOptions=n.parseServerOptions(t,e.dt.customDatatableView.initOptions),e.dt.options.columns=v(t.columns),e.dt.options.sortColumn=e.customDatatableView&&e.customDatatableView.defaultSortColumn?e.customDatatableView.defaultSortColumn:void 0,e.dt.options.sortColumnAsc=!0,e.dt.source=t.source,e.refresh()),r.$on("$translateChangeStart",function(){e.language=a.translateTable()})}function d(){o(function(){for(var t=0;t<e.rows.length;t++)e.rows[t].checked=e.dt.selectAll;e.options.events.onSelectRow(p())},0)}function f(){o(function(){for(var t=!0,a=0;a<e.rows.length;a++)t=t&&e.rows[a].checked;e.dt.selectAll=t,e.options.events.onSelectRow(p()),e.$$phase&&e.$apply()},0)}function p(){for(var t=[],a=0;a<e.rows.length;a++)e.rows[a].checked&&t.push(e.rows[a].id);return t}function m(t,a){var r=t;return e.dt.customDatatableView&&e.dt.customDatatableView.textLimit&&a>=0&&e.dt.customDatatableView.textLimit[a]&&r.length>e.dt.customDatatableView.textLimit[a]&&(e.limitData.push(r),r='<div class="limit-text-popover" ng-click="openModal('+(e.limitData.length-1)+')" uib-popover="{{limitData['+(e.limitData.length-1)+"].substr(0, 500)+(limitData["+(e.limitData.length-1)+"].length>500?'...':'')}}\" popover-trigger=\"mouseenter\">"+r.substr(0,e.dt.customDatatableView.textLimit[a])+"...</div>"),e.dt.customDatatableView&&e.dt.customDatatableView.icons&&e.dt.customDatatableView.icons[a]&&(e.dt.customDatatableView.icons[a][r]||(r="undefined"),r='<div class="text-center"><em class="fa fa-'+e.dt.customDatatableView.icons[a][r].icon+" text-"+e.dt.customDatatableView.icons[a][r].textType+'" data-toggle="tooltip" title="'+e.dt.customDatatableView.icons[a][r].tooltip+'"></em></div>'),r}function g(t){var a={};(e.serverOptions.hasCheckboxes||e.serverOptions.hasDropdowns)&&(a.id=t.pop()),a.data=t;for(var r=0;r<a.data.length;r++)a.data[r]=m(a.data[r],r);return e.serverOptions.hasCheckboxes&&a.data.unshift("<wr-crud-datatable-widgets-checkbox class='text-center' select-row='onSelectRow()' row='row.checked'>"),e.serverOptions.hasDropdowns&&a.data.push("<wr-crud-datatable-widgets-dropdown actions='actions' row='row.id'>"),a.hasCheckbox=e.serverOptions.hasCheckboxes,a.hasDropdown=e.serverOptions.hasDropdowns,a}function v(t){for(var a=[],r=0;r<t.length;r++)a.push({sortable:!e.customDatatableView||!e.customDatatableView.notSortable||!e.customDatatableView.notSortable[r],searchable:!0,data:t[r],type:"text"});return a}function h(t){y(!0),e.dt.filterData=t,e.refresh(!0)}function w(){y(!0),e.dt.filterData=void 0,e.refresh(!0)}function b(a){e.isLoaded=!1,a&&(e.dt.options.page=1),e.busy?e.isThereAtListOneRequestForRefresh||(e.isThereAtListOneRequestForRefresh=!0,o(function(){e.isThereAtListOneRequestForRefresh=!1,b(!0)},300)):(e.busy=!0,e.dt.options.echo++,t.get(e.dt.source,e.dt.options,e.dt.filterData).then(function(t){t.data.sEcho===e.dt.options.echo&&(e.dt.options.total=t.data.iTotalRecords,e.dt.pagesCount=Math.ceil(t.data.iTotalRecords/parseInt(e.dt.options.pagination)),e.rows=t.data.aaData.map(function(e){return g(e)}),e.isThereAtListOneRequestForRefresh||(e.isLoaded=!0,y(!1)),e.options.events.onSelectRow(p())),e.busy=!1},function(t){console.error(t),e.isThereAtListOneRequestForRefresh||(e.isLoaded=!0,y(!1)),e.busy=!1}))}function y(e){e?$("#filter").addClass("traditional whirl"):$("#filter").removeClass("traditional whirl")}function D(t){var a=e.limitData[t];"string"==typeof a&&/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(a="<pre>"+s("json")(x(a))+"</pre>"),i.open({template:a,size:"lg"})}function x(e){return"string"==typeof e&&/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?x(JSON.parse(e)):e}function k(e){l(e)}var C=this;C.dt={refresh:b},e.busy=!1,e.serverOptions={},e.isThereAtListOneRequestForRefresh=!1,e.language=a.translateTable(),e.refresh=b,e.isLoaded=!0,e.dt={selectAll:!1,options:{columns:[],page:1,pagination:"10",total:0,echo:0}},e.dt.customDatatableView=e.customDatatableView||{},e.onSelectAll=d,e.onSelectRow=f,e.limitData=[],e.openModal=D,e.options.build=k,e.options.filter=h,e.options.reset=w,e.options.refresh=b,e.options.getSelectedRows=p}var u={scope:{options:"=",customDatatableView:"="},templateUrl:e.basepath("directives/crud-datatable.directive.html"),restrict:"EA",link:c};return u}angular.module("crud.datatable").directive("wrCrudDatatable",e),e.$inject=["RouteHelpers","datatableService","TranslateDatatablesService","$rootScope","$timeout","CrudDatatableDataParser","$uibModal","$filter"]}(),angular.module("app").service("datatableService",datatableService),datatableService.$inject=["$http"],function(){function e(e,t){function a(e,a,r){function o(){e.serverSideData&&(e.action=e.serverSideData.vars.action,e.method=e.serverSideData.vars.method,e.form.widgets=t.parseWidgets(e.serverSideData.children,e.serverSideData.vars.value,e.serverSideData.vars.full_name),e.form.options=t.parseOptions(e.serverSideData.vars),e.form.actions=t.parseActions(e.options.actionBar,{save:e.save,cancel:e.cancel}),e.form.name=t.parseName(e.serverSideData.vars))}function n(){e.options.actions.save(e.form.widgets,e.action,e.method)}function i(){e.options.actions.cancel()}function s(e,t,a){for(var r=0;r<e.length;r++)e[r].name===t[a]&&(e[r].options.hasError=!0,t.length>a+1&&e[r].value&&e[r].value.widgets&&(e[r].value.widgets=s(e[r].value.widgets,t,a+1)));return e}function c(t){for(var a=0;a<t.length;a++)e.form.widgets=s(e.form.widgets,t[a].split("."),0)}function u(t){e.serverSideData=t,o()}e.form={},e.serverSideData=void 0,e.save=n,e.cancel=i,e.options.build=u,e.options.showErrorFields=c,e.visible=!0,o()}var r={link:a,scope:{options:"=",src:"=",actionBlock:"="},templateUrl:e.basepath("directives/crud-dialog.directive.html"),restrict:"EA"};return r}angular.module("crud.dialog").directive("wrCrudDialog",e),e.$inject=["RouteHelpers","CrudFormDataParser"]}(),function(){function e(e,t){function a(e,a,r){function o(){e.serverSideData&&(e.form.widgets=t.parseWidgets(e.serverSideData.children,e.serverSideData.vars.value,e.serverSideData.vars.full_name),e.form.options=t.parseOptions(e.serverSideData.vars),e.form.actions=t.parseActions(e.options.actionBar,{search:e.search,reset:e.reset}),e.form.name=t.parseName(e.serverSideData.vars),e.form.options.isGrid=!0)}function n(){e.options.actions.search(e.form.widgets)}function i(){for(var t=0;t<e.form.widgets.length;t++)"datetimerangepicker"===e.form.widgets[t].type?e.form.widgets[t].value={}:"ajaxdata"===e.form.widgets[t].type?(e.form.widgets[t].value.value=void 0,"object"==typeof e.form.widgets[t].value.widgets&&Object.keys(e.form.widgets[t].value.widgets).forEach(function(a){var r=e.form.widgets[t].value.widgets[a];"undefined"!=typeof r.options.choices&&(r.options.editable=!1,r.options.choices=[],r.options.choices.unshift({id:void 0,label:r.options.placeholder})),r.value=void 0})):"multichoice"===e.form.widgets[t].type?"undefined"!=typeof e.form.widgets[t].value.choices&&(e.form.widgets[t].value.choices=[]):"range"===e.form.widgets[t].type?"undefined"!=typeof e.form.widgets[t].value&&(e.form.widgets[t].value={min:void 0!=e.form.widgets[t].options.range_min.value?e.form.widgets[t].options.range_min.value:e.form.widgets[t].options.range_min.minValue,max:void 0!=e.form.widgets[t].options.range_max.value?e.form.widgets[t].options.range_max.value:e.form.widgets[t].options.range_max.maxValue}):e.form.widgets[t].value=void 0;e.options.actions.reset()}function s(t){e.serverSideData=t,o()}e.form={},e.serverSideData=void 0,e.search=n,e.reset=i,e.options.build=s,e.visible=!0,o()}var r={link:a,scope:{options:"=",src:"="},templateUrl:e.basepath("directives/crud-filter.directive.html"),restrict:"EA"};return r}angular.module("crud.filter").directive("wrCrudFilter",e),e.$inject=["RouteHelpers","CrudFormDataParser"]}(),function(){function e(e){function t(e,t,a){}var a={scope:{options:"=",name:"=",widgets:"=",actions:"=",actionBlock:"="},templateUrl:e.basepath("directives/crud-form.directive.html"),restrict:"EA",link:t};return a}angular.module("crud.form").directive("wrCrudForm",e),e.$inject=["RouteHelpers"]}(),function(){function e(e,t,a){function r(e,r,o){function n(){e.serverSideData&&(e.groups=t.parseGroups(e.serverSideData))}function i(t){for(var r=0;r<e.groups.length;r++)for(var o=0;o<e.groups[r].buttons.length;o++)"create"!==e.groups[r].buttons[o].callback&&(e.groups[r].buttons[o].disabled=!t);a(function(){e.$apply()},0,!1)}function s(t,a){i(!1),e.options.actions[e.groups[t].buttons[a].callback]&&e.options.actions[e.groups[t].buttons[a].callback](e.groups[t].buttons[a])}function c(t){e.serverSideData=t,n()}e.groups=[],e.triggerCallback=s,e.options.refreshButtonsAccessibility=i,e.options.build=c,e.visible=!0,n()}var o={scope:{options:"="},link:r,templateUrl:e.basepath("directives/crud-toolbar.directive.html"),restrict:"EA"};return o}angular.module("crud.toolbar").directive("wrCrudToolbar",e),e.$inject=["RouteHelpers","CrudToolbarDataParser","$timeout"]}(),function(){function e(e,t){function a(e,a,r){function o(){e.options.choices.unshift({id:void 0,label:e.options.placeholder}),e.value&&e.value.value&&n(e.options.formId),e.value.widgets=e.options.widgets}function n(a){var r="object"==typeof e.value.value?e.value.value.id:e.value.value;t.send({url:e.options.isSmartSelectedDymamicLoaderValues.getUrl+"/"+r+(a?"/"+a:""),method:"GET"},function(t){angular.forEach(t,function(t){angular.forEach(e.value.widgets,function(a){a.name==t.name&&(a.options=angular.extend(a.options,t.options)),a.options.fullName||(a.options.fullName=e.options.formName+"["+a.name+"]")})})},function(e){console.error(e)})}e.value={},e.onValueChange=n,o()}var r={scope:{options:"=",name:"=",value:"="},link:a,templateUrl:e.basepath("widgets/crud-widgets-ajaxdata.directive.html"),restrict:"EA"};return r}angular.module("crud.widgets.ajaxdata").directive("wrCrudWidgetsAjaxdata",e),e.$inject=["RouteHelpers","transport"]}(),function(){function e(e){var t={scope:{options:"=",name:"=",value:"="},templateUrl:e.basepath("widgets/crud-widgets-checkbox.directive.html"),restrict:"EA"};return t}angular.module("crud.widgets.checkbox").directive("wrCrudWidgetsCheckbox",e),e.$inject=["RouteHelpers"]}(),function(){function e(e){function t(e,t,a){e.options.choices.unshift({id:void 0,label:e.options.placeholder})}var a={scope:{options:"=",name:"=",value:"="},link:t,templateUrl:e.basepath("widgets/crud-widgets-choice.directive.html"),restrict:"EA"};return a}angular.module("crud.widgets.choice").directive("wrCrudWidgetsChoice",e),e.$inject=["RouteHelpers"]}(),function(){function e(e,t){function a(a,r,o){t(function(){/<[a-z][\s\S]*>/i.test(a.$eval(o.compileIt))?r.replaceWith(e(a.$eval(o.compileIt))(a.$parent)):r.replaceWith(a.$eval(o.compileIt))},0)}var r={link:a,replace:!1,terminal:!0,priority:1e3,restrict:"EA"};return r}angular.module("crud.widgets.compileit").directive("compileIt",e),e.$inject=["$compile","$timeout"]}(),function(){function e(e){function t(e,t,a){function r(e){return e.replace(/Y+/g,"YYYY").replace(/m+/g,"MM").replace(/d+/g,"DD").replace(/H+/g,"HH").replace(/i+/g,"mm").replace(/s+/g,"ss")}e.value={},e.localOptions={timePicker:!e.options.without_time,timePickerSeconds:e.options.with_seconds,timePicker24Hour:!0,timePickerIncrement:1,eventHandlers:{"cancel.daterangepicker":function(){e.value={}}},locale:{format:r(e.options.date_format),separator:" - "}}}var a={scope:{options:"=",name:"=",value:"="},link:t,templateUrl:e.basepath("widgets/crud-widgets-datetimerangepicker.directive.html"),restrict:"EA"};return a}angular.module("crud.widgets.datetimerangepicker").directive("wrCrudWidgetsDatetimerangepicker",e),e.$inject=["RouteHelpers"]}(),function(){function e(e){function t(t,a,r){a.attr("wr-crud-widgets-"+t.$eval(r.wrCrudWidgetsDynamic),""),a.removeAttr("wr-crud-widgets-dynamic"),a.removeAttr("data-wr-crud-widgets-dynamic"),e(a)(t)}var a={link:t,replace:!1,terminal:!0,priority:1e3,restrict:"EA"};return a}angular.module("crud.widgets.dynamic").directive("wrCrudWidgetsDynamic",e),e.$inject=["$compile"]}(),function(){function e(e){var t={scope:{options:"=",name:"=",value:"="},templateUrl:e.basepath("widgets/crud-widgets-hidden.directive.html"),restrict:"EA"};return t}angular.module("crud.widgets.hidden").directive("wrCrudWidgetsHidden",e),e.$inject=["RouteHelpers"]}(),function(){function e(e){var t={scope:{options:"=",name:"=",value:"="},templateUrl:e.basepath("widgets/crud-widgets-jsonview.directive.html"),restrict:"EA"};return t}angular.module("crud.widgets.jsonview").directive("wrCrudWidgetsJsonview",e).filter("prettyJson",function(){function e(e){try{JSON.parse(e)}catch(t){return e}for(;"string"==typeof e;)e=JSON.parse(e);return e}return e}),e.$inject=["RouteHelpers"];
}(),function(){function e(e){function t(e,t,a){e.value||(e.value={choices:[]}),e.options.choices.unshift({id:void 0,label:e.options.placeholder})}var a={scope:{options:"=",name:"=",value:"="},link:t,templateUrl:e.basepath("widgets/crud-widgets-multichoice.directive.html"),restrict:"EA"};return a}angular.module("crud.widgets.multichoice").directive("wrCrudWidgetsMultichoice",e),e.$inject=["RouteHelpers"]}(),function(){function e(e){function t(e,t,a){e.options.range_min.field_name||(e.options.range_min.field_name="min"),e.options.range_max.field_name||(e.options.range_max.field_name="max"),e.value||(e.value={min:void 0!=e.options.range_min.value?e.options.range_min.value:e.options.range_min.minValue,max:void 0!=e.options.range_max.value?e.options.range_max.value:e.options.range_max.maxValue})}var a={scope:{options:"=",name:"=",value:"="},link:t,templateUrl:e.basepath("widgets/crud-widgets-range.directive.html"),restrict:"EA"};return a}angular.module("crud.widgets.range").directive("wrCrudWidgetsRange",e),e.$inject=["RouteHelpers"]}(),function(){function e(e,t,a){function r(e,r,o){function n(){e.options.choices.unshift({id:void 0,label:e.options.placeholder}),e.value&&e.value.value?i(e.options.formId):e.value={}}function i(r){var o="object"==typeof e.value.value?e.value.value.id:e.value.value;t.send({url:e.options.isSmartSelectedForm.getUrl+"/"+o+(r?"/"+r:""),method:"GET"},function(t){e.value.widgets=t.map(function(t){return a.parseSubformWidget(t,e.options.formName)})},function(e){console.error(e)})}e.onValueChange=i,n()}var o={scope:{options:"=",name:"=",value:"="},link:r,templateUrl:e.basepath("widgets/crud-widgets-subform.directive.html"),restrict:"EA"};return o}angular.module("crud.widgets.subform").directive("wrCrudWidgetsSubform",e),e.$inject=["RouteHelpers","transport","CrudFormDataParser"]}(),function(){function e(e){var t={scope:{options:"=",name:"=",value:"="},templateUrl:e.basepath("widgets/crud-widgets-text.directive.html"),restrict:"EA"};return t}angular.module("crud.widgets.text").directive("wrCrudWidgetsText",e),e.$inject=["RouteHelpers"]}(),function(){function e(e,t){function a(e,a,r){function o(t){return e.columns[t].sortable?t===e.sortColumn?e.sortColumnAsc?"sorting_asc":"sorting_desc":"sorting":void 0}function n(a){e.columns[a].sortable&&(a===e.sortColumn?e.sortColumnAsc=!e.sortColumnAsc:(e.sortColumnAsc=!0,e.sortColumn=a),t(function(){e.refresh({goToFirst:!0})},0))}function i(){e.onSelectAll()}e.getSortClass=o,e.sortByIndex=n,e.selectRow=i}var r={scope:{dt:"=",hasCheckbox:"=",hasDropdown:"=",columns:"=",sortColumn:"=",sortColumnAsc:"=",onSelectAll:"&",refresh:"&"},templateUrl:e.basepath("datatable-core/crud-datatable-header.directive.html"),restrict:"EA",link:a};return r}angular.module("crud.datatable.header").directive("wrCrudDatatableHeader",e),e.$inject=["RouteHelpers","$timeout"]}(),function(){function e(e){var t={scope:{language:"=",pagination:"=",page:"=",total:"="},templateUrl:e.basepath("datatable-core/crud-datatable-info.directive.html"),restrict:"EA"};return t}angular.module("crud.datatable.info").directive("wrCrudDatatableInfo",e),e.$inject=["RouteHelpers"]}(),function(){function e(e,t){function a(e,a,r){function o(a){e.page=a,t(function(){e.refresh()},0)}function n(e){return e?new Array(e):void 0}e.goTo=o,e.getNumber=n,e.maxStickyPages=5}var r={scope:{page:"=",pagesCount:"=",language:"=",refresh:"&"},templateUrl:e.basepath("datatable-core/crud-datatable-pages.directive.html"),restrict:"EA",link:a};return r}angular.module("crud.datatable.pages").directive("wrCrudDatatablePages",e),e.$inject=["RouteHelpers","$timeout"]}(),function(){function e(e,t){function a(e,a,r){function o(){t(function(){e.refresh({goToFirst:!0})},0)}e.onPaginationChanged=o,e.availableOptions=[10,25,50,100]}var r={scope:{pagination:"=",language:"=",refresh:"&"},templateUrl:e.basepath("datatable-core/crud-datatable-pagination.directive.html"),restrict:"EA",link:a};return r}angular.module("crud.datatable.pagination").directive("wrCrudDatatablePagination",e),e.$inject=["RouteHelpers","$timeout"]}(),function(){function e(e){var t={scope:{onSelectRow:"&",row:"=",actions:"=",hasDropdown:"="},templateUrl:e.basepath("datatable-core/crud-datatable-row.directive.html"),restrict:"EA"};return t}angular.module("crud.datatable.row").directive("wrCrudDatatableRow",e),e.$inject=["RouteHelpers"]}(),function(){function e(e,t){function a(e,a,r){function o(){t(function(){e.refresh({goToFirst:!0})},0)}e.onChange=o}var r={scope:{search:"=",language:"=",refresh:"&"},templateUrl:e.basepath("datatable-core/crud-datatable-search.directive.html"),restrict:"EA",link:a};return r}angular.module("crud.datatable.search").directive("wrCrudDatatableSearch",e),e.$inject=["RouteHelpers","$timeout"]}(),function(){function e(e,t){function a(e,a,r){function o(){t(function(){e.selectRow()},0)}e.onChange=o}var r={scope:{selectRow:"&",row:"="},templateUrl:e.basepath("datatable-widgets/crud-datatable-widgets-checkbox.directive.html"),restrict:"EA",link:a};return r}angular.module("crud.datatable.widgets.checkbox").directive("wrCrudDatatableWidgetsCheckbox",e),e.$inject=["RouteHelpers","$timeout"]}(),function(){function e(e,t,a,r){function o(e,t,o){function n(){e.uuid=e.generateUUID()}function i(e){var t=[];return Object.keys(e).map(function(a,r){0!==r&&t.push("divider"),Array.prototype.push.apply(t,e[a])}),t}function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function c(t){var a=r.parseAction(t,e.row);e.actions.hasOwnProperty(a.callback)&&e.actions[a.callback](a.data)}e.generateUUID=s,e.menu=[],e.uuid="",e.triggerCallback=c,a.loader("config").onLoaded({onSuccess:function(t){e.menu=i(t.action.row)}}),n()}var n={scope:{row:"=",actions:"="},templateUrl:e.basepath("datatable-widgets/crud-datatable-widgets-dropdown.directive.html"),restrict:"EA",link:o};return n}angular.module("crud.datatable.widgets.dropdown").directive("wrCrudDatatableWidgetsDropdown",e),e.$inject=["RouteHelpers","$timeout","supervisor","CrudDatatableDataParser"]}();